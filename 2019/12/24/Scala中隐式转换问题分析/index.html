<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        木子李G
    </title>
    <link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">
    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
<link rel="alternate" href="/atom.xml" title="木子李G" type="application/atom+xml">
</head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            Scala隐式转换的问题分析
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h1 id="Scala隐式转换的问题分析"><a href="#Scala隐式转换的问题分析" class="headerlink" title="Scala隐式转换的问题分析"></a>Scala隐式转换的问题分析</h1><h2 id="引出问题"><a href="#引出问题" class="headerlink" title="引出问题"></a>引出问题</h2><p>首先来看一个需求：<strong>将String类型的数字赋值给Int类型的变量。</strong></p>
<p>也就是这样：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">val</span> num:<span class="type">Int</span>=<span class="string">"20"</span></span><br></pre></td></tr></table></figure>
<p>要想实现这样的效果，小伙伴们应该都能想到使用<code>隐式方法</code>这个技能。许多小伙伴一鸡冻就撸出了如下的代码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">strToInt</span></span>(str:<span class="type">String</span>):<span class="type">Int</span>= &#123;</span><br><span class="line">      str.toInt</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>友情提示：</em></strong>隐式转换的代码要定义在object中哦~~~</p>
<p>定义了如上的隐式方法后，接下来我们来使用一下该隐式方法。接下来来一段完整代码尝尝：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> num:<span class="type">Int</span> = <span class="string">"20"</span></span><br><span class="line">    println(num)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 定义的隐式方法</span></span><br><span class="line"><span class="comment">    *    该方法的功能是将String转成Int</span></span><br><span class="line"><span class="comment">    * @param str  需要转换的字符串</span></span><br><span class="line"><span class="comment">    * @return 返回 Int</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">strToInt</span></span>(str:<span class="type">String</span>):<span class="type">Int</span>= &#123;</span><br><span class="line">    str.toInt</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码撸完，感觉还不错，接着我们运行以上代码：哐当，出错啦。。。。</p>
<p>控制台输出以下错误信息：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="type">Error</span>:(<span class="number">17</span>, <span class="number">5</span>) <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : str<span class="class">.<span class="keyword">type</span> (<span class="params">with underlying type <span class="type">String</span></span>)</span></span><br><span class="line"><span class="class"> <span class="title">required</span></span>: ?&#123;<span class="function"><span class="keyword">def</span> <span class="title">toInt</span></span>: ?&#125;</span><br><span class="line"><span class="type">Note</span> that <span class="keyword">implicit</span> conversions are not applicable because they are ambiguous:</span><br><span class="line"> both method augmentString in <span class="class"><span class="keyword">object</span> <span class="title">Predef</span> <span class="title">of</span> <span class="title">type</span> (<span class="params">x: <span class="type">String</span></span>)<span class="title">scala</span>.<span class="title">collection</span>.<span class="title">immutable</span>.<span class="title">StringOps</span></span></span><br><span class="line"><span class="class"> <span class="title">and</span> <span class="title">method</span> <span class="title">strToInt</span> <span class="title">in</span> <span class="title">object</span> <span class="title">TestDemo</span> <span class="title">of</span> <span class="title">type</span> (<span class="params">str: <span class="type">String</span></span>)<span class="title">Int</span></span></span><br><span class="line"><span class="class"> <span class="title">are</span> <span class="title">possible</span> <span class="title">conversion</span> <span class="title">functions</span> <span class="title">from</span> <span class="title">str</span>.<span class="title">type</span> <span class="title">to</span> <span class="title">?</span></span>&#123;<span class="function"><span class="keyword">def</span> <span class="title">toInt</span></span>: ?&#125;</span><br><span class="line">    str.toInt</span><br><span class="line"><span class="type">Error</span>:(<span class="number">17</span>, <span class="number">9</span>) value toInt is not a member of <span class="type">String</span></span><br><span class="line">    str.toInt</span><br></pre></td></tr></table></figure>
<p>大伙看错误信息中有个关键的单词<code>ambiguous(模糊不清的，模棱两可的)</code>，以上错误信息的大致意思是说：</p>
<blockquote>
<p>隐式转换在这里不适用了，因为隐式转换出现了模糊不清的情况，这里有两个方法<br>一个在object Predef中有一个<strong>augmentString</strong>方法将x:String转成scala.collection.immutable.StringOps，<br>另一个在object TestDemo中有<strong>strToInt</strong>方法将str: String转成了Int<br>以上两个方法都可以将str: String转成了Int，所以隐式转换出现了模糊不清的情况</p>
</blockquote>
<p>看完后估计有的小伙伴还是一头雾水，这到底是说的啥，这到底是为什么？？好，那接下来我们就看看其中的究竟。</p>
<h2 id="分析原因"><a href="#分析原因" class="headerlink" title="分析原因"></a>分析原因</h2><h3 id="分析String相关的源码"><a href="#分析String相关的源码" class="headerlink" title="分析String相关的源码"></a>分析String相关的源码</h3><p>首先我们来看一段代码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">   <span class="keyword">val</span> str:<span class="type">String</span> = <span class="string">"20"</span></span><br><span class="line">   <span class="keyword">val</span> i = str.toInt</span><br><span class="line">   println(i)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>以上代码的正确编译运行，输出结果是Int类型的<code>20</code>。</p>
<p>接下来我们按住键盘上的Ctrl，鼠标点击String查看String类型，发现在object Predef中有这么一段代码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">String</span>        </span>= java.lang.<span class="type">String</span></span><br></pre></td></tr></table></figure>
<p>通过这段代码我们知道，Scala中的String其实是使用了java中的String。好了，那我们回顾以下java中的String有toInt()方法吗，熟悉Java的肯定立马就能回答：没有。对的，就是没有！！</p>
<p>String中没有toInt()方法，但是这里的<code>str</code>却可以使用<code>toInt()</code>，那说明<code>str.toInt</code>这里发生了隐式转换。没错，这里的str由String转换成了StringOps。这么转换的呢，我们上源码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">augmentString</span></span>(x: <span class="type">String</span>): <span class="type">StringOps</span> = <span class="keyword">new</span> <span class="type">StringOps</span>(x)</span><br></pre></td></tr></table></figure>
<p>在object Perdef中有一个隐式方法<code>augmentString</code>将String转换成了StringOps。接着我们再来看看StringOps的源码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">StringOps</span>(<span class="params">override val repr: <span class="type">String</span></span>) <span class="keyword">extends</span> <span class="title">AnyVal</span> <span class="keyword">with</span> <span class="title">StringLike</span>[<span class="type">String</span>] </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">protected</span>[<span class="keyword">this</span>] <span class="function"><span class="keyword">def</span> <span class="title">thisCollection</span></span>: <span class="type">WrappedString</span> = </span><br><span class="line">    <span class="keyword">new</span> <span class="type">WrappedString</span>(repr)</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">protected</span>[<span class="keyword">this</span>] <span class="function"><span class="keyword">def</span> <span class="title">toCollection</span></span>(repr: <span class="type">String</span>): <span class="type">WrappedString</span> = </span><br><span class="line">  <span class="keyword">new</span> <span class="type">WrappedString</span>(repr)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/** Creates a string builder buffer as builder for this class */</span></span><br><span class="line">  <span class="keyword">override</span> <span class="keyword">protected</span>[<span class="keyword">this</span>] <span class="function"><span class="keyword">def</span> <span class="title">newBuilder</span> </span>= <span class="type">StringBuilder</span>.newBuilder</span><br><span class="line"></span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(index: <span class="type">Int</span>): <span class="type">Char</span> = repr charAt index</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">slice</span></span>(from: <span class="type">Int</span>, until: <span class="type">Int</span>): <span class="type">String</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> start = <span class="keyword">if</span> (from &lt; <span class="number">0</span>) <span class="number">0</span> <span class="keyword">else</span> from</span><br><span class="line">    <span class="keyword">if</span> (until &lt;= start || start &gt;= repr.length)</span><br><span class="line">      <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> end = <span class="keyword">if</span> (until &gt; length) length <span class="keyword">else</span> until</span><br><span class="line">    repr.substring(start, end)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">toString</span> </span>= repr</span><br><span class="line">  <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">length</span> </span>= repr.length</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">seq</span> </span>= <span class="keyword">new</span> <span class="type">WrappedString</span>(repr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在StringOps中没有直接发现toInt()方法，不要慌，仔细看看<code>StringOps</code>继承了<code>StringLike</code>，接着我们看看<code>StringLike</code>源码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">StringLike</span>[+<span class="type">Repr</span>] <span class="keyword">extends</span> <span class="title">Any</span> <span class="keyword">with</span> <span class="title">scala</span>.<span class="title">collection</span>.<span class="title">IndexedSeqOptimized</span>[<span class="type">Char</span>, <span class="type">Repr</span>] <span class="keyword">with</span> <span class="title">Ordered</span>[<span class="type">String</span>] </span>&#123;</span><br><span class="line"> <span class="comment">//省略代码................</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">toInt</span></span>: <span class="type">Int</span>         = java.lang.<span class="type">Integer</span>.parseInt(toString)</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * @throws java.lang.NumberFormatException  - If the string does not contain a 			parsable long.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">toLong</span></span>: <span class="type">Long</span>       = java.lang.<span class="type">Long</span>.parseLong(toString)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>终于在StringLike中找到了toInt，因为<code>StringOps</code>继承了<code>StringLike</code>，所以<code>StringOps</code>也就有了toInt()。</p>
<p>再看刚才的隐式方法：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">augmentString</span></span>(x: <span class="type">String</span>): <span class="type">StringOps</span> = <span class="keyword">new</span> <span class="type">StringOps</span>(x)</span><br></pre></td></tr></table></figure>
<p>隐式方法<code>augmentString</code>将String转换成了<code>StringOps</code>，所以：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">   <span class="keyword">val</span> str:<span class="type">String</span> = <span class="string">"20"</span></span><br><span class="line">   <span class="keyword">val</span> i = str.toInt <span class="comment">// 底层代码实现：augmentString(str).toInt</span></span><br><span class="line">   println(i)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>好了，通过以上代码分析，我们知道<code>StringOps</code>中存在<code>toInt</code>方法，所以通过隐式转换将str转成StringOps后就可以调用toInt了。</p>
<h3 id="分析Int相关的源码"><a href="#分析Int相关的源码" class="headerlink" title="分析Int相关的源码"></a>分析Int相关的源码</h3><p>接下来，我们继续分析Int类的源码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Int</span> <span class="title">private</span> <span class="keyword">extends</span> <span class="title">AnyVal</span> </span>&#123;</span><br><span class="line">  <span class="comment">//省略代码</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">toInt</span></span>: <span class="type">Int</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">toLong</span></span>: <span class="type">Long</span></span><br><span class="line">  <span class="comment">//省略代码</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>通过查看Int的源码发现在Int中也存在一个<code>toInt</code>的方法，那么现在如果也存在一个将String转成Int的隐式方法，那么，String也能调用<code>toInt</code>了。分析到这里，我们渐渐的感觉到发现冲突产生的地方了，好的，我们马上来看看我们写的隐式方法的代码：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 定义的隐式方法</span></span><br><span class="line"><span class="comment">    *    该方法的功能是将String转成Int</span></span><br><span class="line"><span class="comment">    * @param str  需要转换的字符串</span></span><br><span class="line"><span class="comment">    * @return 返回 Int</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">strToInt</span></span>(str:<span class="type">String</span>):<span class="type">Int</span>= &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      * 通过分析我们知道StringOps和Int都有toInt方法，所以</span></span><br><span class="line"><span class="comment">      * str.toInt在这里有两个隐式函数都可以进行转换</span></span><br><span class="line"><span class="comment">      * 1、使用scala.Predef 中的</span></span><br><span class="line"><span class="comment">      *       implicit def augmentString(x: String): StringOps = new StringOps(x)</span></span><br><span class="line"><span class="comment">      *   所以str.toInt 就等价于  augmentString(str).toInt</span></span><br><span class="line"><span class="comment">      *</span></span><br><span class="line"><span class="comment">      * 2、使用自己定义这个隐式方法(递归调用)</span></span><br><span class="line"><span class="comment">      *      augmentString 就等价于 strToInt(str).toInt</span></span><br><span class="line"><span class="comment">      *</span></span><br><span class="line"><span class="comment">      *  好了，我们知道隐式转换只能匹配一个，不能有多个，</span></span><br><span class="line"><span class="comment">      *  而这里str.toInt找到两个隐式转换都可以实现，所以出现了之前“模棱两可”的错误信息</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    str.toInt</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>既然分析清楚了出现错误的原因，接下来我们就根据原因来看看如何解决吧。</p>
<p><strong>解决方法的本质就是不要让toInt隐式转换的时候找到多个隐式方法出现“模棱两可”。</strong></p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h3><p>使用<code>Integer.parseInt(str)</code>替换<code>str.toInt</code>。完整代码代码如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> str:<span class="type">Int</span> = <span class="string">"20"</span></span><br><span class="line">    println(str)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">strToInt</span></span>(str:<span class="type">String</span>):<span class="type">Int</span>= &#123;</span><br><span class="line">    <span class="type">Integer</span>.parseInt(str)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用<code>Integer.parseInt(str)</code>替换<code>str.toInt</code>，没有使用<code>str.toInt</code>了，隐式转换自然就就没有了。</p>
<h3 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h3><p>使用<code>new StringOps(str).toInt</code>替换<code>str.toInt</code>。完整代码代码如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> str:<span class="type">Int</span> = <span class="string">"20"</span></span><br><span class="line">    println(str)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">strToInt</span></span>(str:<span class="type">String</span>):<span class="type">Int</span>= &#123;</span><br><span class="line">    <span class="keyword">new</span> <span class="type">StringOps</span>(str).toInt</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用<code>new StringOps(str).toInt</code>替换<code>str.toInt</code>。这里使用<code>new StringOps(str)</code>显式调用了<code>toInt</code>，所以也没有隐式转换了。</p>
<h3 id="方案三"><a href="#方案三" class="headerlink" title="方案三"></a>方案三</h3><p>将自己定义的隐式方法<code>implicit def strToInt(str:String):Int</code>的返回值省略，该方法就不能被递归调用了，那这时候<code>str.toInt</code>就只有<code>implicit def augmentString(x: String): StringOps</code>这一个隐式转换方法了，也解决了两个隐式方法的冲突问题。完整代码如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> str:<span class="type">Int</span> = <span class="string">"20"</span>  <span class="comment">// error</span></span><br><span class="line">    println(str)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">strToInt</span></span>(str:<span class="type">String</span>) = &#123;</span><br><span class="line">    str.toInt</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上代码第四行<code>val str:Int = &quot;20&quot;</code>编译错误，错误信息如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="type">Error</span>:(<span class="number">8</span>, <span class="number">19</span>) <span class="class"><span class="keyword">type</span> <span class="title">mismatch</span></span>;</span><br><span class="line"> found   : <span class="type">String</span>(<span class="string">"20"</span>)</span><br><span class="line"> required: <span class="type">Int</span></span><br><span class="line"> <span class="type">Note</span>: <span class="keyword">implicit</span> method strToInt is not applicable here because it comes after the application point and it lacks an explicit result <span class="class"><span class="keyword">type</span></span></span><br><span class="line"><span class="class">    <span class="title">val</span> <span class="title">str</span></span>:<span class="type">Int</span> = <span class="string">"20"</span></span><br></pre></td></tr></table></figure>
<p>出现该错误的原因是：</p>
<blockquote>
<p>隐式方法没有显式给出返回类型，必须位于应用点之前</p>
</blockquote>
<p>所以正确代码如下：</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">implicit</span> <span class="function"><span class="keyword">def</span> <span class="title">strToInt</span></span>(str:<span class="type">String</span>) = &#123;</span><br><span class="line">    str.toInt</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> str:<span class="type">Int</span> = <span class="string">"20"</span></span><br><span class="line">    println(str)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>好了，到这里我们的问题分析及解决方案就结束了，希望对大家有所帮助。</p>

    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>-<a class="flink" href="https://github.com/sanjinhub/hexo-theme-geek" target="_blank" rel="noopener">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="CmCti21ooOOIzFOhEyFkFvR0-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="FqiyUqbg7McKN2eG0MCewupf">
<script src="/libs/jquery.min.js"></script>
<script src="/libs/highlight/highlight.pack.js"></script>
<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script src="/js/js.js"></script>
<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>