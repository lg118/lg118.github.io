<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>
        木子李
    </title>
    <link rel="stylesheet" href="/libs/highlight/styles/monokai-sublime.css">
    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
<link rel="alternate" href="/atom.xml" title="木子李" type="application/atom+xml">
</head>

<body id="bodyx">
    <div class="hd posts">
    <a href="/index.html"><i class="fa fa-reply replay-btn" aria-hidden="true"></i></a>
    <div class="post-title">
        <p>
            Linux学习-05
        </p>
        <hr>
    </div>
    <div class="post-content">
        <h2 id="进程树"><a href="#进程树" class="headerlink" title="进程树"></a>进程树</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop10 opt]# pstree</span><br><span class="line">init─┬─abrtd</span><br><span class="line">     ├─acpid</span><br><span class="line">     ├─anacron</span><br><span class="line">     ├─atd</span><br><span class="line">     ├─auditd───&#123;auditd&#125;</span><br><span class="line">     ├─automount───4*[&#123;automount&#125;]</span><br><span class="line">     ├─certmonger</span><br><span class="line">     ├─crond</span><br><span class="line">     ├─cupsd</span><br><span class="line">     ├─dbus-daemon───&#123;dbus-daemon&#125;</span><br><span class="line">     ├─hald─┬─hald-runner─┬─hald-addon-acpi</span><br><span class="line">     │      │             └─hald-addon-inpu</span><br><span class="line">     │      └─&#123;hald&#125;</span><br><span class="line">     ├─master─┬─pickup</span><br><span class="line">     │        └─qmgr</span><br><span class="line">     ├─mcelog</span><br><span class="line">     ├─6*[mingetty]</span><br><span class="line">     ├─rpc.statd</span><br><span class="line">     ├─rpcbind</span><br><span class="line">     ├─rsyslogd───3*[&#123;rsyslogd&#125;]</span><br><span class="line">     ├─sshd───sshd───bash───pstree</span><br><span class="line">     └─udevd───2*[udevd]</span><br></pre></td></tr></table></figure>
<h2 id="日期时间"><a href="#日期时间" class="headerlink" title="日期时间"></a>日期时间</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">date +%F  #获取年月日</span><br><span class="line">date -s "2020-08-04 10:08:20" # 设置时间</span><br><span class="line">hwclock -w #将系统时间写入硬件</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">配置时间同步服务器</span></span><br><span class="line">yum -y install ntp</span><br><span class="line">service ntpd start</span><br><span class="line">chkconfig ntpd on</span><br></pre></td></tr></table></figure>
<h2 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kill pid # 杀死进程</span><br><span class="line">kill -9 pid #强制杀死进程</span><br><span class="line">kill %jobid #杀死后台运行的job</span><br></pre></td></tr></table></figure>
<h2 id="basename和dirname"><a href="#basename和dirname" class="headerlink" title="basename和dirname"></a>basename和dirname</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">basename: #返回路径中最后一级目录名或者文件名</span><br><span class="line">[root@hadoop10 jdk]# basename /opt/apps/jdk/src.zip </span><br><span class="line">src.zip</span><br><span class="line">[root@hadoop10 jdk]# basename /opt/apps/jdk/</span><br><span class="line">jdk</span><br><span class="line"></span><br><span class="line">dirname:# 除去basename就是dirname</span><br><span class="line"></span><br><span class="line">[root@hadoop10 jdk]# dirname /opt/apps/jdk/src.zip </span><br><span class="line">/opt/apps/jdk</span><br><span class="line">[root@hadoop10 jdk]# dirname ./src.zip               </span><br><span class="line">.</span><br><span class="line">[root@hadoop10 jdk]# dirname /opt/apps/jdk/</span><br><span class="line">/opt/apps</span><br><span class="line"></span><br><span class="line">一个文件或目录的完整路径就是 dirname+"/"+basename</span><br></pre></td></tr></table></figure>
<h2 id="上传下载"><a href="#上传下载" class="headerlink" title="上传下载"></a>上传下载</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop10 jdk]# yum -y install lrzsz</span><br><span class="line">rz：#上传</span><br><span class="line">sz：#下载</span><br></pre></td></tr></table></figure>
<h2 id="任务调度"><a href="#任务调度" class="headerlink" title="任务调度"></a>任务调度</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  |  |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> *  *  *  *  * user-name <span class="built_in">command</span> to be executed</span></span><br><span class="line"></span><br><span class="line">日跟星期是或的关系</span><br><span class="line">* #表示每xxx.比如每分钟  每小时 每天</span><br><span class="line">*/5 *  *  *  *  #每5分钟</span><br><span class="line">1 2 2 * *  #每月的2号2:01分</span><br><span class="line">1 2 2 * 3  #每月的2号或者周三的2:01分</span><br><span class="line">1 * * * 2 #每周2的每小时的01分</span><br><span class="line">*/2 * 2 1 3 #每年的1月2号或者1月的每周三，每2分钟执行一次</span><br><span class="line">10 14 2 3 2 #每年的3月2日或者3月的每周2的14:10分</span><br><span class="line">1,7,9 2 2 * *  #每月的2号2:01分 2:07分 2:09分</span><br><span class="line">1-10 2 2 * *  #每月的2号2:01到10分</span><br><span class="line"></span><br><span class="line">[root@hadoop10 opt]# crontab --help</span><br><span class="line">usage:  crontab [-u user] file</span><br><span class="line">        crontab [-u user] [ -e | -l | -r ]</span><br><span class="line">                (default operation is replace, per 1003.2)</span><br><span class="line">        -e      (edit user's crontab)</span><br><span class="line">        -l      (list user's crontab)</span><br><span class="line">        -r      (delete user's crontab)</span><br><span class="line">        -i      (prompt before deleting user's crontab)</span><br><span class="line">        -s      (selinux context)</span><br><span class="line">        </span><br><span class="line">注意：</span><br><span class="line"> 1、每个用户的定时任务都存储在 /var/spool/cron/用户名 中</span><br><span class="line"> 2、root 可以给其他用户指定定时任务</span><br><span class="line">    crontab -u bigdata yy.sh</span><br><span class="line"> 3、root 可以查看和删除其他用户的定时任务</span><br><span class="line">	 [root@hadoop10 cron]# crontab -l -u bigdata</span><br><span class="line">		* * * * * date</span><br><span class="line">	 [root@hadoop10 cron]# crontab -r -u bigdata</span><br><span class="line"> 4、如果执行的命令没有重定向输出，信息是发送到邮件</span><br></pre></td></tr></table></figure>
<h2 id="克隆虚拟机"><a href="#克隆虚拟机" class="headerlink" title="克隆虚拟机"></a>克隆虚拟机</h2><p>hadoop11是用hadoop10克隆得到的。那么hadoop11和hadoop10是一模一样的，所以我们需要做以下的更改：</p>
<p>1、改主机名</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network</span><br><span class="line">HOSTNAME=hadoop11</span><br></pre></td></tr></table></figure>
<p>2、改网卡的物理地址</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">方式一：</span></span><br><span class="line">rm -rf /etc/udev/rules.d/70-persistent-net.rules</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">方式二：</span></span><br><span class="line">vim /etc/udev/rules.d/70-persistent-net.rules</span><br><span class="line">1、删除 eth0 这一行</span><br><span class="line">2、将eth1 改称eth0</span><br></pre></td></tr></table></figure>
<p>3、改IP</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-eth0</span><br><span class="line">1、删除物理地址 和 UUID</span><br><span class="line">2、更改ip</span><br></pre></td></tr></table></figure>
<p>4、重启系统</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h2 id="scp和rsync"><a href="#scp和rsync" class="headerlink" title="scp和rsync"></a>scp和rsync</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp 命令用于 Linux 之间复制文件和目录。</span><br><span class="line">scp 是 secure copy 的缩写, scp 是 linux 系统下基于 ssh 登陆进行安全的远程文件拷贝命令。</span><br><span class="line">scp 是加密的</span><br><span class="line"></span><br><span class="line">[root@hadoop10 opt]# vim /etc/hosts</span><br><span class="line">192.168.10.10 hadoop10</span><br><span class="line">192.168.10.11 hadoop11</span><br><span class="line">192.168.10.12 hadoop12</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">在hadoop10节点上远程登录到hadoop11节点</span></span><br><span class="line">ssh [user@]hostname</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">免密登录</span></span><br><span class="line">ssh-keygen # 生成公钥和私钥</span><br><span class="line"> 执行命令后会在用户家目录下生成.ssh/id_rsa 私钥  id_rsa.pub公钥</span><br><span class="line">ssh-copy-id user@主机名 #发送公钥给对应的用户主机</span><br><span class="line"> 执行命令后会在用户家目录下生成.ssh/authorized_keys</span><br><span class="line"> </span><br><span class="line">ssh登录成功后会在用户家目录下生成.ssh/known_hosts 信任主机列表</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">scp 复制目录  -r 递归</span></span><br><span class="line">[root@hadoop10 opt]# scp -r a root@hadoop11:/opt/</span><br><span class="line"></span><br><span class="line">注意：scp不能拷贝软连接</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可以拷贝任何文件级目录</span></span><br><span class="line">[root@hadoop10 opt]# rsync -l aa root@hadoop11:/opt/</span><br></pre></td></tr></table></figure>
<h2 id="对称加密"><a href="#对称加密" class="headerlink" title="对称加密"></a>对称加密</h2><p>   加密和解密是同一个密钥</p>
<h2 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h2><p>非对称加密就是有两个密钥，一个公钥，一个私钥</p>
<p>公钥加密的内容只能用私钥解密</p>
<p>私钥加密的内容只能用公钥解密</p>
<p>RSA就是一种非对称加密</p>
<h2 id="shell"><a href="#shell" class="headerlink" title="shell"></a>shell</h2><h3 id="什么是shell？shell脚本能干什么？"><a href="#什么是shell？shell脚本能干什么？" class="headerlink" title="什么是shell？shell脚本能干什么？"></a>什么是shell？shell脚本能干什么？</h3><p><img src="https://i.loli.net/2020/11/10/Q3Sp1PbkM75aues.png" alt="shell.png"></p>
<p>我们之前学习的命令其实都是shell命令，shell脚本就是学习入将零散的shell命令通过流程控制等语句组合在一起，完成某些功能。</p>
<p>编写shell脚本主要的作用：1、解决自动化问题    2、解决批量问题</p>
<p>什么叫脚本：直接运行的。不需要编译的。</p>
<h3 id="标准输入、标准输出、标准错误输出"><a href="#标准输入、标准输出、标准错误输出" class="headerlink" title="标准输入、标准输出、标准错误输出"></a>标准输入、标准输出、标准错误输出</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/proc/进程号/fd</span><br><span class="line">  0：标准输入</span><br><span class="line">  1：标准输出</span><br><span class="line">  2：标准错误输出</span><br><span class="line"> 0 1 2 表示的是文件描述符（file descriptor）</span><br></pre></td></tr></table></figure>
<h3 id="默认输入输出"><a href="#默认输入输出" class="headerlink" title="默认输入输出"></a>默认输入输出</h3><p><img src="https://i.loli.net/2020/11/10/AY2sO7cKhtHWQNB.png" alt="1.png"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop10 opt]# cat 0&lt; 1.txt #将cat的标准输入重定向为1.txt</span><br><span class="line">111</span><br><span class="line">[root@hadoop10 opt]# cat 1.txt #cat 后面的文件参数是1.txt</span><br><span class="line">111</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/11/10/HdSmJ9knMyE7i3e.png" alt="2.png"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop10 opt]# echo "java" 1&gt; 2.txt</span><br></pre></td></tr></table></figure>
<p><img src="https://i.loli.net/2020/11/10/NpG5CeOmk8zHVZx.png" alt="3.png"></p>
<p>标准输出和错误输出重定向</p>
<p><img src="https://i.loli.net/2020/11/10/dG4QfeolEyHrkMu.png" alt="4.png"></p>
<p>混合输出</p>
<p><img src="https://i.loli.net/2020/11/10/rn9t7b2ufIH1RTV.png" alt="5.png"></p>
<p><img src="https://i.loli.net/2020/11/10/4FKzLsb8YxZOVDc.png" alt="6.png"></p>
<p>复制文件：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop10 opt]# cat &lt; 1.txt &gt; 111.txt</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop10 opt]# cat &lt;&lt;EOF &gt;xxx.txt</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> ni hao a </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> wo shuo hua </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> hao hao xuexi </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> -bash: warning: here-document at line 94 delimited by end-of-file (wanted `EOF<span class="string">')</span></span></span><br><span class="line">ctrl+d 表示EOF</span><br></pre></td></tr></table></figure>
    </div>

    
        <hr class="fhr">
        <div id="vcomments"></div>
    
</div>
    <div class="footer" id="footer">
    <p>Copyright © 2020 <a class="flink" href="https://hexo.io" target="_blank" rel="noopener">Hexo</a>-<a class="flink" href="https://github.com/sanjinhub/hexo-theme-geek" target="_blank" rel="noopener">Geek</a>.
        <label class="el-switch el-switch-green el-switch-sm" style="vertical-align: sub;">
            <input type="checkbox" name="switch" id="update_style">
            <span class="el-switch-style"></span>
        </label>
<!--         <script type="text/javascript">
        var cnzz_protocol = (("https:" == document.location.protocol) ? "https://" : "http://");
        document.write(unescape("%3Cspan id='cnzz_stat_icon_1278548644'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/stat.php%3Fid%3D1278548644%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
        </script> -->
    </p>
</div>
<input type="hidden" id="web_style" value="black">
<input type="hidden" id="valine_appid" value="CmCti21ooOOIzFOhEyFkFvR0-gzGzoHsz">
<input type="hidden" id="valine_appKey" value="FqiyUqbg7McKN2eG0MCewupf">
<script src="/libs/jquery.min.js"></script>
<script src="/libs/highlight/highlight.pack.js"></script>
<script src='//cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script src="/js/js.js"></script>
<style type="text/css">
.v * {
    color: #698fca;
}

.v .vlist .vcard .vhead .vsys {
    color: #3a3e4a;
}

.v .vlist .vcard .vh .vmeta .vat {
    color: #638fd5;
}

.v .vlist .vcard .vhead .vnick {
    color: #6ba1ff;
}

.v a {
    color: #8696b1;
}

.v .vlist .vcard .vhead .vnick:hover {
    color: #669bfc;
}
</style>
</body>

</html>